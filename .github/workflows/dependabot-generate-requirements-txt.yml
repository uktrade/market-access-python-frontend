on:
  pull_request:

permissions: write-all

jobs:
  generate_some_code:
    name: Generate some code!
    runs-on: ubuntu-latest
    #if: ${{ github.actor == 'dependabot[bot]' }}
    steps:
        - name: Set up Python ${{ matrix.python-version }}
          uses: actions/setup-python@v4
          with:
            python-version: '3.8.x'

        - name: Install Poetry
          uses: snok/install-poetry@v1

        - uses: actions/checkout@v4
          with:
            sparse-checkout: .

        - name: Generate new requirements.txt file
          run: poetry export --without-hashes -f requirements.txt -o requirements.txt

        - uses: stefanzweifel/git-auto-commit-action@v5
