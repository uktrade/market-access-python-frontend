{% extends "base.html" %}
{% load govuk_forms %}

{% block page_title %}{{ block.super }} - Define barrier category{% endblock %}

{% block page_content %}

    <a href="{% if has_next %}{{ next_url }}{% else %}{{ urls.back }}{% endif %}" class="govuk-back-link">Back</a>
    {% include 'partials/heading.html' with caption=heading.caption text='Define category' %}
    {% form_error_banner form %}

    <h3 class="report-sectors-heading">Save or add another category</h3>

    <div class="selection-list restrict-width">
        <h3 class="selection-list__heading">Selected categories</h3>
            {% if categories %}
                <ul class="selection-list__list">
                    {% for item in categories %}
                        <li class="selection-list__list__item">
                            <span class="selection-list__list__item__number" data-number="{{ forloop.counter }}"></span>{{ item.title }}

                            <form action="{{ urls.delete_category }}" class="selection-list__list__item__remove-form" method="POST">
                                {% csrf_token %}
                                <input type="hidden" name="category_id" value="{{ item.id }}">
                                {% action_remove_list_item forloop.counter item.title %}
                            </form>
                        </li>
                    {% endfor %}
                </ul>
            {% endif %}

        <a href="{{ urls.add_category }}" class="govuk-button button--secondary selection-list__add-button">Add another category</a>
    </div>

    <form action="" method="POST">
        {% csrf_token %}
        <input type="hidden" name="categories" value="{{ category_ids }}">
        {% include 'reports/partials/new_report_submit_buttons.html' with has_next=has_next next_url=next_url %}
    </form>
{% endblock %}
