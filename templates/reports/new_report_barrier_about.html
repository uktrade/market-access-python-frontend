{% extends 'base.html' %}

{% block page_title %}{{ block.super }} - Add - {{ heading.text }}{% endblock %}

{% block page_content %}

    <section class="restrict-width">

        <a href="{{ urls.back }}" class="govuk-back-link">Back</a>
        {% include 'partials/heading.html' with caption=heading.caption text=heading.text %}
        {% form_error_banner form %}

        <form action="" method="POST">
            {% csrf_token %}

            <div class="{% form_group_classes form.barrier_title.errors %}">
                <label class="govuk-label govuk-label--s" for="{{ form.barrier_title.name }}">
                    {{ form.barrier_title.label }}
                </label>
                {% form_field_error form "barrier_title" %}
                <span id="{{ form.barrier_title.name }}_hint" class="govuk-hint">
                    {{ form.barrier_title.help_text }}
                </span>
                <input class="govuk-input"
                       id="{{ form.barrier_title.name }}"
                       name="{{ form.barrier_title.name }}"
                       type="text"
                       value="{{ form.initial.barrier_title }}"
                       aria-describedby="{{ form.barrier_title.name }}_hint">
            </div>

            <div class="{% form_group_classes form.product.errors %}">
                <label class="govuk-label govuk-label--s" for="{{ form.product.name }}">
                    {{ form.product.label }}
                </label>
                {% form_field_error form "product" %}
                <input class="govuk-input"
                       id="{{ form.product.name }}"
                       name="{{ form.product.name }}"
                       type="text"
                       value="{{ form.initial.product }}">
            </div>



            <div class="{% form_group_classes form.source.errors %}">
                <fieldset class="govuk-fieldset">
                    <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
                        {{ form.fields.source.label }}
                    </legend>
                    {% form_field_error form "source" %}
                    <div class="govuk-radios barrier-source govuk-radios--conditional" data-module="radios">
                        {% for choice_id, choice_value in form.fields.source.choices %}
                        <div class="govuk-radios__item">
                            <input class="govuk-radios__input"
                                   id="source-{{ forloop.counter }}"
                                   name="source"
                                   type="radio"
                                   value="{{ choice_id }}"
                                   {% if form.initial.source == choice_id %}checked="checked"{% endif %}>
                            <label class="govuk-label govuk-radios__label" for="source-{{ forloop.counter }}">
                                {{ choice_value }}
                            </label>
                        </div>
                        {% if choice_id == form.BS.OTHER %}
                        <div class="govuk-radios__conditional" id="conditional-{{ form.BS.OTHER }}" aria-hidden="false">
                            <div class="{% form_group_classes form.other_source.errors %}">
                                <label class="govuk-label govuk-label--s" for="other_source">
                                    {{ form.fields.other_source.label }}
                                </label>
                                {% form_field_error form "other_source" %}
                                <input class="govuk-input"
                                       id="other_source"
                                       name="other_source"
                                       type="text"
                                       value="{{ form.initial.other_source }}">
                            </div>
                        </div>
                        {% endif %}
                        {% endfor %}
                    </div>
                </fieldset>
            </div>

            <div class="{% form_group_classes form.eu_exit_related.errors %}">
                <fieldset class="govuk-fieldset">
                    <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
                        {{ form.fields.eu_exit_related.label }}
                    </legend>
                    {% form_field_error form "eu_exit_related" %}
                    <div class="govuk-radios eu_exit_related">
                        {% for choice_id, choice_value in form.fields.eu_exit_related.choices %}
                        <div class="govuk-radios__item">
                            <input class="govuk-radios__input"
                                   id="eu_exit_related-{{ forloop.counter }}"
                                   name="eu_exit_related"
                                   type="radio"
                                   value="{{ choice_id }}"
                                   {% if form.initial.eu_exit_related == choice_id %}checked="checked"{% endif %}>
                            <label class="govuk-label govuk-radios__label" for="eu_exit_related-{{ forloop.counter }}">
                                {{ choice_value }}
                            </label>
                        </div>
                        {% endfor %}
                    </div>
                </fieldset>
            </div>

            <input type="submit" value="Save and continue" class="govuk-button">
            <button type="submit" class="govuk-button button--secondary" name="action" value="exit">Save and exit</button>

        </form>
	</section>


{% endblock %}


{% block body_script %}
    {{ block.super }}
    <script>
		ma.pages.report.aboutProblem();
	</script>
{% endblock %}

