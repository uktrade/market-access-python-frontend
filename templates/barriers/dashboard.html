{% extends 'base.html' %}

{% block page_title %}{{ block.super }} - Homepage{% endblock %}

{% block body_script %}
    <script>
        ma.pages.index();
    </script>
{% endblock %}

{% block page_content %}
    {% include 'barriers/partials/dashboard_heading.html' %}

    <section>
        <ul class="ma-card-list">
            <li class="ma-card-list__item">
                <h3 class="saved-search__title"><a href="{% url 'barriers:find_a_barrier' %}?user=1">{{ my_barriers_saved_search.name }}</a></h3>
                {% include "barriers/partials/saved_search_badges.html" with saved_search=my_barriers_saved_search %}
            </li>
            <li class="ma-card-list__item">
                <h3 class="saved-search__title"><a href="{% url 'barriers:find_a_barrier' %}?team=1">Team barriers</a></h3>
                {% include "barriers/partials/saved_search_badges.html" with saved_search=team_barriers_saved_search %}
            </li>
            <li class="ma-card-list__item">
                <h3 class="saved-search__title"><a href="">Draft barriers</a></h3>
                <p><span class="ma-badge">6 draft barriers</span></p>
            </li>
        </ul>
    </section>

    <section>
        <h2 class="saved-search-heading">{{ saved_searches|length }}<span class="dashboard-results-header__title__caption"> saved search{{ saved_searches|length|pluralize:"es" }}</span></h2>

        <ul class="ma-card-list">
            {% for saved_search in saved_searches %}
                <li class="ma-card-list__item saved-search">
                    <h3 class="saved-search__title"><a href="{% url 'barriers:find_a_barrier' %}?{{ saved_search.querystring }}&search_id={{ saved_search.id }}">{{ saved_search.name }}</a></h3>

                    {% include "barriers/partials/saved_search_badges.html" %}

                    {% if saved_search.filters %}
                        <ul class="saved-search__filter-list">
                            {% for name, value in saved_search.readable_filters.items %}
                                <li class="saved-search__filter-list-item">{{ value.readable_value|striptags }}</li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
    </section>

{% endblock %}
