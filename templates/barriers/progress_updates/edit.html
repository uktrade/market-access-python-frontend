{% extends "barriers/edit/base.html" %}

{% block page_title %}{{ block.super }} - Edit progress update{% endblock %}

{% block back_link %}
    <a href="{% url 'barriers:barrier_detail' object.id %}" class="govuk-back-link ma-back-link">Back</a>
{% endblock %}

{% block page_content %}

    {% include 'partials/heading.html' with text='Edit progress update' %}
    {% form_error_banner form %}

    <form action="" method="POST" class="restrict-width">
        {% csrf_token %}

        <div id="{{ form.status.name }}" class="govuk-form-group{% if form.status.errors %} govuk-form-group--error{% endif %}">

            {% form_field_error form "status" %}

            <div class="govuk-form-group">
                <fieldset class="govuk-fieldset">
                    <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
                        {{ form.status.label }}
                    </legend>

                    <div class="govuk-radios">
                        {% for value, name in form.fields.status.choices %}
                            <div class="govuk-radios__item">
                                <input class="govuk-radios__input" id="{{ form.status.name }}-{{ value }}" name="{{ form.status.name }}" type="radio" value="{{ value }}"{% if form.status.value == value %} checked="checked"{% endif %}>
                                <label class="govuk-label govuk-radios__label" for="{{ form.status.name }}-{{ value }}">{{ name }}</label>
                            </div>
                        {% endfor %}
                    </div>
                </fieldset>
            </div>
        </div>

        <div id="{{ form.update.name }}" class="govuk-form-group{% if form.update.errors %} govuk-form-group--error{% endif %}">
            <label class="govuk-label govuk-label--s" for="update">{{ form.update.label }}</label>

            {% form_field_error form "update" %}
            <span class="govuk-hint">{{ form.update.help_text }}</span>


            <textarea class="govuk-textarea" name="{{ form.update.name }}" rows="5" maxlength="1250">{% if form.update.value %}{{ form.update.value }}{% endif %}</textarea>
        </div>

        <div id="{{ form.next_steps.name }}" class="govuk-form-group{% if form.next_steps.errors %} govuk-form-group--error{% endif %}">
            <label class="govuk-label govuk-label--s" for="next_steps">{{ form.next_steps.label }}</label>

            {% form_field_error form "next_steps" %}
            <span class="govuk-hint">{{ form.next_steps.help_text }}</span>


            <textarea class="govuk-textarea" name="{{ form.next_steps.name }}" rows="5" maxlength="1250">{% if form.next_steps.value %}{{ form.next_steps.value }}{% endif %}</textarea>
        </div>


        <input type="submit" value="Save and exit to barrier" class="govuk-button">
        <a class="form-cancel" href="{% url 'barriers:barrier_detail' barrier.id %}">Cancel</a>

    </form>

{% endblock %}
